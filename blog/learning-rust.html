<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-06-16 Tue 10:05 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Learning Rust: The Pick-Up Sticks Game</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="T.V Raman" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">Learning Rust: The Pick-Up Sticks Game</h1>
<div id="outline-container-org0a67b1f" class="outline-2">
<h2 id="org0a67b1f"><span class="section-number-2">1</span> Overview</h2>
<div class="outline-text-2" id="text-1">
<p>
This <a href="https://github.com/tvraman/pick-sticks">directory</a> contains an implementation of the <i>Pick Up Sticks</i> game
described in my paper <a href="http://emacspeak.sourceforge.net/raman/publications/thinking-of-math/thinking-of-math.html">Thinking Of Mathematics (Section 5)</a>.
</p>

<p>
It's an interesting experience writing it in Rust as I learn the
language. The original implementation described in my paper was
written in 1987 in Fortran-77, and consisted of one single
function. Though that style of programming would be frowned upon today
and is clearly not advisable for programming in the large, it's
interesting to observe that a more structured implementation as seen
in this Rust implementation qrequires a lot more fore-thought with
respect to code organization.
</p>
</div>
</div>

<div id="outline-container-org8a0d2da" class="outline-2">
<h2 id="org8a0d2da"><span class="section-number-2">2</span> Programming Environment</h2>
<div class="outline-text-2" id="text-2">
<p>
here is a short overview of  the programming environment  used:
</p>

<ol class="org-ol">
<li>Emacs 28.0.50 with emacspeak 52.0.</li>
<li>Package  <code>eglot</code> for managing the project with an  LSP server.</li>
<li>Rust Language Server <a href="https://github.com/rust-lang-nursery/rls">(RLS)</a> as the LSP server.</li>
<li>Package <code>company</code> for completion.</li>
<li>Package <code>yasnippet</code> for code templates.</li>
<li>Package <code>rust-mode</code> for Rust editing smarts.</li>
<li>Package <code>racer</code> for additional cross-referencing and
documentation support.</li>
<li>Package <code>cargo</code> for cargo integration from inside Emacs.</li>
</ol>

<p>
In the process of setting up my Rust environment, I also
speech-enabled Emacs packages <code>rust-mode</code>, <code>racer</code> and <code>cargo</code> for Emacspeak.
</p>
</div>
</div>


<div id="outline-container-org6572a3a" class="outline-2">
<h2 id="org6572a3a"><span class="section-number-2">3</span> Books</h2>
<div class="outline-text-2" id="text-3">
<p>
I  downloaded  <i>The Rust Programming Language (2018)</i> from Bookshare
and it's what I am still using as I write this. Note that this book is
also available in the Rust distribution. The version in the Rust
distribution is a little less usable since it's split into multiple
smaller HTML files with each file repeating a lot of navigational
boiler-plate at the top.
</p>
</div>
</div>

<div id="outline-container-org2e40623" class="outline-2">
<h2 id="org2e40623"><span class="section-number-2">4</span> Experience Learning Rust</h2>
<div class="outline-text-2" id="text-4">
<p>
I usually find that I learn a language better if I write some code as
I learn the language.
In this instance, I decided to program the pick-up-sticks game &#x2014; a
simple game that I programmed in 1987 for the final class project for
CS-101 at IIT-Bombay. Here are the rules of the game:
</p>

<ol class="org-ol">
<li>This is a two-player game  and the game starts with \(n\) sticks.</li>
<li>The first player can pick at most \(n-1\)  sticks.</li>
<li>Assume a player picks \(k\) sticks. At the  subsequent turn, opponent
can pick at most  \(2 * k\) sticks.</li>
<li>The player who is able to <i>clean-up</i> the remaining sticks while
adhering to the rules is the winner.</li>
</ol>

<p>
Read  <a href="http://emacspeak.sourceforge.net/raman/publications/thinking-of-math/thinking-of-math.html">Thinking Of Mathematics (Section 5)</a> for a description of an
algorithm that is guaranteed to win.
</p>
</div>
</div>

<div id="outline-container-orge266a0f" class="outline-2">
<h2 id="orge266a0f"><span class="section-number-2">5</span> The Implementation</h2>
<div class="outline-text-2" id="text-5">
<p>
Learning Rust's ownership rules for memory management, and learning to
use references  the Rust way were some of the things that were unique
to this learning experience.
Rust has some unique features including declaring lifetimes that are
typically needed in more advanced cases; however in my initial
attempts, not doing things the Rust way caused compile-time errors
that initially guided me toward using and declaring
lifetimes. Eventually, all of those declarations became unnecessary.
More generally, the Rust compiler turns out to be a very good Rust
teacher.
</p>
</div>
</div>

<div id="outline-container-orgda356e2" class="outline-2">
<h2 id="orgda356e2"><span class="section-number-2">6</span> Crux Of The Implementation</h2>
<div class="outline-text-2" id="text-6">
<p>
See module <code>game.rs</code> for the implementation. The core of the
implementation is still a handful of lines to implement the winning
strategy of:
</p>

<ol class="org-ol">
<li>If the number of sticks at the start is a Fibonacci number, ask
the opponent to play first.</li>
<li>At each turn, force the opponent toward the closest Fibonacci number.</li>
<li>Do above while respecting the limit rule, i.e. if you pick \(k\)
sticks, the opponent can pick up to \(2k\) sticks, so never pick  \(k\)
where \(3k >= n\).</li>
<li>The result of (3) is to subdivide the game into smaller games
when playing with larger values of \(n\) &#x2014; see the <span class="underline">while</span> loop in
method    <code>my_move</code>.</li>
</ol>
</div>
</div>
<div id="outline-container-org66df065" class="outline-2">
<h2 id="org66df065"><span class="section-number-2">7</span> Closing Thoughts</h2>
<div class="outline-text-2" id="text-7">
<ol class="org-ol">
<li>The computing environment I now have is far more sophisticated
than what I had in 1987.</li>
<li>Today, I have interactive completion, source-code
cross-references, on-the-fly access to documentation, and a fully
accessible book where I can look up things whenever I want.</li>
<li>In 1987, I did most of my thinking and problem-solving in my
dorm-room with no computer to hand. When ready with the solution,
I made a few notes in Braille using a <a href="https://www.google.com/search?num=25&amp;lite=90586&amp;q=braille+pocket+slate">pocket-slate and stylus</a>,
then went to the computer room with a volunteer reader and typed
up the program, with the student volunteer providing high-quality
interactive spoken feedback.</li>
<li>Interestingly, I think it took me less time  from memory to
implement the solution in 1987 &#x2014; perhaps this is time shrinking
with number of years passed.</li>
<li>Either way, the primary take-away is that it pays to analyse a
problem before one actually starts writing code. Writing code is
always fun, and today, even more so given the excellent array of
tools &#x2014; but unless one focuses on the problem at hand, one can
spend a lot of time <i>sharpening one's pencils</i> as opposed to
writing something useful.</li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2020-06-14 Sun 00:00</p>
<p class="author">Author: T.V Raman</p>
<p class="date">Created: 2020-06-16 Tue 10:05</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
